(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{13:function(t,a,e){},14:function(t,a,e){},15:function(t,a,e){"use strict";e.r(a);var n=e(0),o=e.n(n),r=e(7),l=e.n(r),c=(e(13),e(1)),s=e(2),i=e(4),p=e(3),u=e(5),h=(e(14),"Tpk_391653b184fb45f2a8e9b1270c0306e9"),d="https://sandbox.iexapis.com/stable/stock/market/batch?";var f=function(t,a,e){return function(t,a,e){var n=d;n+="symbols=";for(var o=0;o<t.length;o++)n+=t[o],o<t.length-1&&(n+=",");return n+="&types="+a,a.includes("chart")&&(n+=e?"&range="+e:"&range=1y"),n+="&token="+h}(t,a,e)};var m=function(t){return function(t){var a=JSON.parse(localStorage.getItem(t));if(!a)throw new Error("Did not find '"+t+"' in local storage");return a}(t)},g=function(t,a){return function(t,a){localStorage.setItem(a,JSON.stringify(t))}(t,a)},v=function(t){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(u.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("button",null,"Add Portfolio")}}]),a}(o.a.Component),D=function(t){function a(t){var e;return Object(c.a)(this,a),(e=Object(i.a)(this,Object(p.a)(a).call(this,t))).state={stockSymbols:["AAPL","FB","TWTR"],data:{},chartRange:"5d",error:null,loading:!1},e}return Object(u.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){console.log("==> Portfolio render");var t=this.props.name,a=this.props.portfolioData,e=[];for(var n in a)if(a.hasOwnProperty(n)){console.log("==> HELLO:",a);var r=a[n].quote.latestPrice,l=a[n].purchase.shares,c=a[n].purchase.price;e.push(o.a.createElement("tr",{key:n},o.a.createElement("td",null,n),o.a.createElement("td",null,r),o.a.createElement("td",null,c),o.a.createElement("td",null,l),o.a.createElement("td",null,String((r*l).toFixed(2))),o.a.createElement("td",null,"Select button")))}var s=this.state.error;return s?o.a.createElement("p",null,s.message):this.state.loading?o.a.createElement("p",null,"Loading ..."):o.a.createElement("div",null,o.a.createElement("h2",null,t),o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Stock"),o.a.createElement("th",null,"Latest Price"),o.a.createElement("th",null,"Purchase Price"),o.a.createElement("th",null,"Shares"),o.a.createElement("th",null,"Total"),o.a.createElement("th",null,"Select"))),o.a.createElement("tbody",null,e)))}}]),a}(o.a.Component),y=function(t){function a(t){var e;return Object(c.a)(this,a),(e=Object(i.a)(this,Object(p.a)(a).call(this,t))).state={portfolios:[],appData:{}},e}return Object(u.a)(a,t),Object(s.a)(a,[{key:"dataFetcher",value:function(t,a,e){var n=this,o=f(t,a,e);return fetch(o).then((function(t){if(t.ok)return t.json();throw new Error("Error while fetching from api...")})).then((function(t){return t})).catch((function(t){return n.setState({error:t})}))}},{key:"addEmptyPortfolio",value:function(t){var a=this,e=this.state.appData;e[t]={},this.setState({appData:e},(function(){console.log("==> new empty portfolio added"),console.log("==> Saving to local storage"),g(a.state.appData,"appData")}))}},{key:"addEmptyStock",value:function(t,a){var e=this,n=this.state.appData;n[t][a]={},this.setState({appData:n},(function(){console.log("==> new empty stock added"),console.log("==> Saving to local storage"),g(e.state.appData,"appData")}))}},{key:"addEmptyChart",value:function(t,a){var e=this,n=this.state.appData;n[t][a].chart=[],this.setState({appData:n},(function(){console.log("==> new empty chart added"),console.log("==> Saving to local storage"),g(e.state.appData,"appData")}))}},{key:"addChartElement",value:function(t,a,e){var n=this,o=this.state.appData;o[t][a].chart.push(e),this.setState({appData:o},(function(){console.log("==> new chart element added"),console.log("==> Saving to local storage"),g(n.state.appData,"appData")}))}},{key:"addQuote",value:function(t,a,e){var n=this,o=this.state.appData;o[t][a].quote=e,this.setState({appData:o},(function(){console.log("==> new quote added"),console.log("==> Saving to local storage"),g(n.state.appData,"appData")}))}},{key:"addPurchase",value:function(t,a,e){var n=this,o=this.state.appData;o[t][a].purchase=e,this.setState({appData:o},(function(){console.log("==> new purchase added"),console.log("==> Saving to local storage"),g(n.state.appData,"appData")}))}},{key:"addDummyPurchase",value:function(t){var a=this.state.appData[t];for(var e in a)if(a.hasOwnProperty(e)){this.addPurchase(t,e,{date:"1970-01-01",price:10,shares:10})}}},{key:"appendPortfolio",value:function(t,a){var e=this,n=this.state.appData;n[t]=a,this.setState({appData:n},(function(){console.log("==> appended portfolio"),console.log("==> Saving to local storage"),g(e.state.appData,"appData")}))}},{key:"createAndAppendPortfolio",value:function(t,a,e,n){var o=this;this.dataFetcher(a,e,n).then((function(a){for(var e in a)a.hasOwnProperty(e)&&(a[e].purchase={date:"1970-01-01",price:10,shares:10});var n=o.state.appData;n[t]=a,o.setState({appData:n},(function(){console.log("==> Data fetched, dummy purchase data added"),g(o.state.appData,"appData")}))}))}},{key:"componentDidMount",value:function(){var t=this;console.log("==> Creating dummy data: "),this.createAndAppendPortfolio("My Big Portfolio",["AAPL","GOOGL","TWTR","FB"],"quote,chart","5d"),this.createAndAppendPortfolio("My Big Portfolio 2",["AAPL","GOOGL","TWTR","FB"],"quote,chart","5d"),this.createAndAppendPortfolio("My Big Portfolio 3",["AAPL","GOOGL","TWTR","FB"],"quote,chart","5d");try{var a=m("portfolios"),e=m("appData");this.setState({portfolios:a,appData:e},(function(){console.log("==> Loaded 'portfolios' and 'appData' from local storage"),console.log("==> appData:",t.state.appData)}))}catch(n){console.log("==>",n)}}},{key:"render",value:function(){console.log("==> App render");var t=this.state.appData,a=[];for(var e in t)t.hasOwnProperty(e)&&a.push(e);return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"SPMS"),o.a.createElement("a",{href:"https://iexcloud.io"},"Data provided by IEX Cloud"),o.a.createElement("p",null,"15 minute delay in price"),o.a.createElement(v,null),a.map((function(a){return o.a.createElement(D,{key:a,name:a,portfolioData:t[a]})})))}}]),a}(o.a.Component);l.a.render(o.a.createElement(y,null),document.getElementById("root"))},8:function(t,a,e){t.exports=e(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.5e896e1f.chunk.js.map